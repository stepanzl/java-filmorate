# üé¨ Filmorate ‚Äî —Å–µ—Ä–≤–∏—Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —Ñ–∏–ª—å–º–æ–≤

**Filmorate** ‚Äî —ç—Ç–æ —É—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –Ω–∞ Java –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏ —Ñ–∏–ª—å–º–æ–≤ –∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Å–≤—è–∑—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.  
–°–µ—Ä–≤–∏—Å —Ö—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∏–ª—å–º–∞—Ö, –∂–∞–Ω—Ä–∞—Ö, –ª–∞–π–∫–∞—Ö –∏ –¥—Ä—É–∂–±–µ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.  

---

## –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ ER-–¥–∏–∞–≥—Ä–∞–º–º–∞, —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª—è Filmorate.  
–û–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–≤—è–∑–∏ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, —Ñ–∏–ª—å–º–∞–º–∏, –∂–∞–Ω—Ä–∞–º–∏, –ª–∞–π–∫–∞–º–∏ –∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏ –¥—Ä—É–∂–±—ã.

![ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ Filmorate](./ERD.png)


---

## –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

| –¢–∞–±–ª–∏—Ü–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|----------|------------|
| `users` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| `films` | –§–∏–ª—å–º—ã —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ MPA-—Ä–µ–π—Ç–∏–Ω–≥–æ–º |
| `genres` | –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∂–∞–Ω—Ä–æ–≤ |
| `film_genres` | –°–≤—è–∑—å —Ñ–∏–ª—å–º–æ–≤ —Å –∂–∞–Ω—Ä–∞–º–∏ |
| `film_likes` | –õ–∞–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ —Ñ–∏–ª—å–º–∞–º |
| `friendships` | –î—Ä—É–∂–±–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏ `PENDING` –∏ `CONFIRMED` |
| `mpa_ratings` | –í–æ–∑—Ä–∞—Å—Ç–Ω—ã–µ —Ä–µ–π—Ç–∏–Ω–≥–∏ Motion Picture Association (MPA) |

---

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### 1. –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å–º
```sql
INSERT INTO films (name, description, release_date, duration, mpa_id)
VALUES ('Inception', '–§–∞–Ω—Ç–∞—Å—Ç–∏—á–µ—Å–∫–∏–π —Ç—Ä–∏–ª–ª–µ—Ä', '2010-07-16', 148, 4);
```

### 2. –î–æ–±–∞–≤–∏—Ç—å –∂–∞–Ω—Ä—ã –∫ —Ñ–∏–ª—å–º—É
```sql
INSERT INTO film_genres (film_id, genre_id)
VALUES (1, 2), (1, 5);
```

### 3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ç–∞–≤–∏—Ç –ª–∞–π–∫ —Ñ–∏–ª—å–º—É
```sql
INSERT INTO film_likes (film_id, user_id)
VALUES (1, 3);
```

### 4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –≤ –¥—Ä—É–∑—å—è
```sql
INSERT INTO friendships (requester_id, addressee_id, status)
VALUES (1, 2, 'PENDING');
```

### 5. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –¥—Ä—É–∂–±—É
```sql
UPDATE friendships
SET status = 'CONFIRMED'
WHERE requester_id = 1 AND addressee_id = 2;
```

### 6. –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ø-3 –∂–∞–Ω—Ä–∞, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ª–∞–π–∫–∞–ª —á–∞—â–µ –≤—Å–µ–≥–æ
```sql
SELECT g.name AS genre_name, COUNT(*) AS like_count
FROM film_likes fl
JOIN film_genres fg ON fg.film_id = fl.film_id
JOIN genres g ON g.id = fg.genre_id
WHERE fl.user_id = :user_id
GROUP BY g.id, g.name
ORDER BY like_count DESC
LIMIT 3;
```